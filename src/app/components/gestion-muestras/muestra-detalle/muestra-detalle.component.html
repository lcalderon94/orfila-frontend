<div class="contenedor-pagina">
    <div class="header">
      <button class="back-button" (click)="volver()">
        <span>‚Üê</span> Volver
      </button>
      <h1>Detalle de Muestra</h1>
    </div>
  
    <div class="muestra-container" *ngIf="muestra">
      <form class="muestra-form">
        <!-- Secci√≥n informaci√≥n registro -->
        <div class="form-section">
          <h2>INFORMACI√ìN DE REGISTRO</h2>
          <div class="form-row">
            <div class="form-group">
              <label>Fecha</label>
              <input type="text" [value]="muestra.fechaRegistro | date:'dd/MM/yyyy HH:mm:ss'" readonly>
            </div>
            
            <div class="form-group">
              <label>Usuario</label>
              <input type="text" [value]="muestra.usuario" readonly>
            </div>
          </div>
        </div>
        
        <!-- Secci√≥n localizaci√≥n -->
        <div class="form-section">
          <h2>LOCALIZACI√ìN</h2>
          <div class="form-row">
            <div class="form-group">
              <label>C.B. Localizaci√≥n</label>
              <input type="text" [value]="muestra.localizacion.codigoBarras || ''" readonly>
            </div>
            
            <div class="form-group">
              <label>Descripci√≥n</label>
              <input type="text" [value]="muestra.localizacion.descripcionLocalizacion || ''" readonly>
            </div>
          </div>
        </div>
        
        <!-- Secci√≥n muestra -->
        <div class="form-section">
          <h2>MUESTRA</h2>
          <div class="form-row">
            <div class="form-group">
              <label>C.B. Muestra</label>
              <input type="text" [value]="muestra.codigoBarras || ''" readonly>
            </div>
            
            <div class="form-group">
              <label>Descripci√≥n</label>
              <input type="text" [(ngModel)]="muestra.descripcion" name="descripcion">
            </div>
          </div>
        </div>
        
        <!-- Secci√≥n episodio/sujeto -->
        <div class="form-section" *ngIf="muestra.episodioId || muestra.sujetoId">
          <h2>RELACIONES</h2>
          <div class="form-row">
            <div class="form-group" *ngIf="muestra.episodioId">
              <label>Episodio</label>
              <div class="input-with-button">
                <input type="text" [value]="muestra.episodioNumero || ''" readonly>
                <button class="link-button" (click)="irAlEpisodio()">
                  <span>üîó</span>
                </button>
              </div>
            </div>
            
            <div class="form-group" *ngIf="muestra.sujetoId">
              <label>Sujeto</label>
              <div class="input-with-button">
                <input type="text" [value]="muestra.sujetoNombre || ''" readonly>
                <button class="link-button" (click)="irAlSujeto()">
                  <span>üîó</span>
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Secci√≥n imagen -->
        <div class="form-section">
          <h2>A√ëADIR IMAGEN</h2>
          <div class="imagen-container">
            <div class="upload-section">
              <input type="file" accept="image/*" (change)="onArchivoSeleccionado($event)" 
                    id="upload-image" style="display: none">
              <button class="upload-button" (click)="activarInputFile()">
                <span>üì§</span> Seleccionar imagen
              </button>
            </div>
            
            <div class="image-preview" *ngIf="imagenPreview">
              <img [src]="imagenPreview" alt="Vista previa de la imagen">
            </div>
          </div>
        </div>
        
        <!-- Botones de acci√≥n -->
        <div class="action-buttons">
          <button class="primary-button" (click)="guardar()">
            GUARDAR
          </button>
          
          <button class="secondary-button" (click)="volver()">
            ATR√ÅS
          </button>
        </div>
      </form>
    </div>
  </div>